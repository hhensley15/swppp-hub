<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SWPPP Management Hub</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>
</head>
<body>
    <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect, useMemo } = React;

    // More icon components
    const MapPin = () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" /><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" /></svg>;
    const Search = () => <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" /></svg>;
    const User = () => <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" /></svg>;
    const Filter = () => <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.707A1 1 0 013 7V4z" /></svg>;
    const Plus = () => <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 6v6m0 0v6m0-6h6m-6 0H6" /></svg>;
    const Eye = () => <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" /></svg>;

    const SWPPPInspectionHub = () => {
        // All of Shawn's inspection sites
        const [inspections, setInspections] = useState([
            {
                id: 1,
                siteName: "St. Francios Substation",
                address: "3980 Hazel run Road, Bonne Terre",
                inspector: "Shawn Garland",
                contractor: "Ameren",
                inspectionStartDate: "",
                monthlyAllottedInspections: ""
            },
            {
                id: 2,
                siteName: "Hampton Inn",
                address: "1331 Shapiro Drive, Festus",
                inspector: "Shawn Garland",
                contractor: "Budrovich",
                inspectionStartDate: "",
                monthlyAllottedInspections: ""
            },
            {
                id: 3,
                siteName: "Dunklin High School",
                address: "713 Circle Street, Herculaneum, MO 63048",
                inspector: "Shawn Garland",
                contractor: "ICS",
                inspectionStartDate: "",
                monthlyAllottedInspections: ""
            },
            {
                id: 4,
                siteName: "Covering House",
                address: "800 Montebello Camp Road, Imperial",
                inspector: "Shawn Garland",
                contractor: "PCX",
                inspectionStartDate: "",
                monthlyAllottedInspections: ""
            },
            {
                id: 5,
                siteName: "7 Brew",
                address: "1289 Jeffco Blvd, Arnold",
                inspector: "Shawn Garland",
                contractor: "7 brew",
                inspectionStartDate: "",
                monthlyAllottedInspections: ""
            },
            {
                id: 6,
                siteName: "Mercy Hospital South",
                address: "10010 Kennerly Road, St. Louis, MO 63128",
                inspector: "Shawn Garland",
                contractor: "Budrovich",
                inspectionStartDate: "",
                monthlyAllottedInspections: ""
            },
            {
                id: 7,
                siteName: "St. Louis Zoo Main Zoo",
                address: "1 Government Dr, St. Louis, MO 63110 - GATE 5",
                inspector: "Shawn Garland",
                contractor: "Budrovich",
                inspectionStartDate: "",
                monthlyAllottedInspections: ""
            }
        ]);

        const [activeTab, setActiveTab] = useState('inspections');
        const [selectedInspector, setSelectedInspector] = useState('all');
        const [selectedContractor, setSelectedContractor] = useState('all');
        const [searchTerm, setSearchTerm] = useState('');
        const [selectedInspection, setSelectedInspection] = useState(null);
        const [showAddForm, setShowAddForm] = useState(false);

        // Get unique contractors and inspectors
        const contractors = useMemo(() => {
            const uniqueContractors = [...new Set(inspections.map(i => i.contractor))];
            return uniqueContractors.sort();
        }, [inspections]);

        const inspectors = useMemo(() => {
            const uniqueInspectors = [...new Set(inspections.map(i => i.inspector))];
            return uniqueInspectors.sort();
        }, [inspections]);

        // Filter inspections
        const filteredInspections = useMemo(() => {
            return inspections.filter(inspection => {
                const matchesInspector = selectedInspector === 'all' || inspection.inspector === selectedInspector;
                const matchesContractor = selectedContractor === 'all' || inspection.contractor === selectedContractor;
                const matchesSearch = searchTerm === '' || 
                    inspection.siteName.toLowerCase().includes(searchTerm.toLowerCase()) ||
                    inspection.contractor.toLowerCase().includes(searchTerm.toLowerCase());
                
                return matchesInspector && matchesContractor && matchesSearch;
            });
        }, [inspections, selectedInspector, selectedContractor, searchTerm]);

        // Editable cell component
        const EditableCell = ({ inspection, field, value, placeholder = "" }) => {
            const [isEditing, setIsEditing] = useState(false);
            const [editValue, setEditValue] = useState(value || "");

            const handleSave = () => {
                setInspections(prev => prev.map(insp => 
                    insp.id === inspection.id ? { ...insp, [field]: editValue } : insp
                ));
                setIsEditing(false);
            };

            if (isEditing) {
                return (
                    <input
                        type={field === 'inspectionStartDate' ? 'date' : 'text'}
                        value={editValue}
                        onChange={(e) => setEditValue(e.target.value)}
                        onBlur={handleSave}
                        onKeyDown={(e) => e.key === 'Enter' && handleSave()}
                        className="w-full text-xs border border-blue-300 rounded px-2 py-1 focus:outline-none focus:border-blue-500"
                        autoFocus
                    />
                );
            }

            return (
                <div
                    onClick={() => setIsEditing(true)}
                    className="cursor-pointer hover:bg-blue-50 px-2 py-1 rounded text-xs min-h-[24px] flex items-center"
                    title="Click to edit"
                >
                    {value ? (
                        field === 'inspectionStartDate' ? new Date(value).toLocaleDateString() : value
                    ) : (
                        <span className="text-gray-400 italic">{placeholder}</span>
                    )}
                </div>
            );
        };

        return (
            <div className="min-h-screen bg-gray-50">
                {/* Header */}
                <div className="bg-white shadow-sm border-b">
                    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
                        <div className="flex justify-between items-center">
                            <div>
                                <h1 className="text-2xl font-bold text-gray-900">SWPPP Management Hub</h1>
                                <p className="text-gray-600">Storm Water Pollution Prevention Plan Management</p>
                            </div>
                            <div className="flex gap-2">
                                <button 
                                    onClick={() => setShowAddForm(true)}
                                    className="flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors"
                                >
                                    <Plus />
                                    Add Inspection
                                </button>
                            </div>
                        </div>
                        
                        {/* Tab Navigation */}
                        <div className="flex space-x-1 mt-4">
                            <button 
                                onClick={() => setActiveTab('inspections')}
                                className={`px-4 py-2 rounded-lg font-medium transition-colors ${
                                    activeTab === 'inspections' 
                                        ? 'bg-blue-100 text-blue-700 border border-blue-200' 
                                        : 'text-gray-600 hover:bg-gray-100'
                                }`}
                            >
                                üìã Inspections
                            </button>
                            <button 
                                onClick={() => setActiveTab('calendar')}
                                className={`px-4 py-2 rounded-lg font-medium transition-colors ${
                                    activeTab === 'calendar' 
                                        ? 'bg-blue-100 text-blue-700 border border-blue-200' 
                                        : 'text-gray-600 hover:bg-gray-100'
                                }`}
                            >
                                üìÖ Calendar
                            </button>
                            <button 
                                onClick={() => setActiveTab('documents')}
                                className={`px-4 py-2 rounded-lg font-medium transition-colors ${
                                    activeTab === 'documents' 
                                        ? 'bg-blue-100 text-blue-700 border border-blue-200' 
                                        : 'text-gray-600 hover:bg-gray-100'
                                }`}
                            >
                                üìÅ Document Hub
                            </button>
                        </div>
                    </div>
                </div>

                {/* Content */}
                <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
                    {activeTab === 'inspections' && (
                        <>
                            {/* Filters */}
                            <div className="bg-white rounded-lg shadow-sm border p-4 mb-6">
                                <div className="flex flex-wrap gap-4 items-center">
                                    <div className="flex items-center gap-2">
                                        <Search />
                                        <input
                                            type="text"
                                            placeholder="Search sites, contractors..."
                                            value={searchTerm}
                                            onChange={(e) => setSearchTerm(e.target.value)}
                                            className="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent w-64"
                                        />
                                    </div>
                                    
                                    <div className="flex items-center gap-2">
                                        <User />
                                        <select
                                            value={selectedInspector}
                                            onChange={(e) => setSelectedInspector(e.target.value)}
                                            className="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                        >
                                            <option value="all">All Inspectors</option>
                                            {inspectors.map(inspector => (
                                                <option key={inspector} value={inspector}>{inspector}</option>
                                            ))}
                                        </select>
                                    </div>

                                    <div className="flex items-center gap-2">
                                        <Filter />
                                        <select
                                            value={selectedContractor}
                                            onChange={(e) => setSelectedContractor(e.target.value)}
                                            className="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                        >
                                            <option value="all">All Contractors</option>
                                            {contractors.map(contractor => (
                                                <option key={contractor} value={contractor}>{contractor}</option>
                                            ))}
                                        </select>
                                    </div>

                                    <div className="ml-auto text-sm text-gray-600">
                                        Showing {filteredInspections.length} of {inspections.length} inspections
                                    </div>
                                </div>
                            </div>

                            {/* Eco Inspection Records Table */}
                            <div className="bg-white rounded-lg shadow-sm border">
                                <div className="p-4 border-b">
                                    <h2 className="text-lg font-semibold">üå± Eco Inspection Records</h2>
                                    <p className="text-sm text-gray-600 mt-1">Click any field to edit ‚Ä¢ Fields save automatically</p>
                                </div>
                                <div className="overflow-x-auto">
                                    <table className="w-full">
                                        <thead className="bg-gray-50">
                                            <tr>
                                                <th className="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Site</th>
                                                <th className="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Inspector</th>
                                                <th className="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date Started</th>
                                                <th className="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Monthly Allotted</th>
                                                <th className="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Contractor</th>
                                                <th className="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody className="bg-white divide-y divide-gray-200">
                                            {filteredInspections.map((inspection) => (
                                                <tr key={inspection.id} className="hover:bg-gray-50">
                                                    <td className="px-4 py-4 whitespace-nowrap">
                                                        <div className="font-medium text-gray-900">{inspection.siteName}</div>
                                                        <div className="text-sm text-gray-500">{inspection.address}</div>
                                                    </td>
                                                    <td className="px-4 py-4 whitespace-nowrap">
                                                        <EditableCell 
                                                            inspection={inspection} 
                                                            field="inspector" 
                                                            value={inspection.inspector}
                                                            placeholder="Enter inspector name"
                                                        />
                                                    </td>
                                                    <td className="px-4 py-4 whitespace-nowrap">
                                                        <EditableCell 
                                                            inspection={inspection} 
                                                            field="inspectionStartDate" 
                                                            value={inspection.inspectionStartDate}
                                                            placeholder="Click to set date"
                                                        />
                                                    </td>
                                                    <td className="px-4 py-4 whitespace-nowrap">
                                                        <EditableCell 
                                                            inspection={inspection} 
                                                            field="monthlyAllottedInspections" 
                                                            value={inspection.monthlyAllottedInspections}
                                                            placeholder="Enter monthly quota"
                                                        />
                                                    </td>
                                                    <td className="px-4 py-4 whitespace-nowrap">
                                                        <EditableCell 
                                                            inspection={inspection} 
                                                            field="contractor" 
                                                            value={inspection.contractor}
                                                            placeholder="Enter contractor name"
                                                        />
                                                    </td>
                                                    <td className="px-4 py-4 whitespace-nowrap text-sm font-medium">
                                                        <button
                                                            onClick={() => setSelectedInspection(inspection)}
                                                            className="text-blue-600 hover:text-blue-900"
                                                            title="View Details"
                                                        >
                                                            <Eye />
                                                        </button>
                                                    </td>
                                                </tr>
                                            ))}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </>
                    )}

                    {activeTab === 'calendar' && (
                        <div className="bg-white rounded-lg shadow-sm border p-6">
                            <h2 className="text-2xl font-bold text-gray-900 mb-4">üìÖ Calendar View</h2>
                            <p className="text-gray-600">Calendar functionality coming in the next update!</p>
                        </div>
                    )}

                    {activeTab === 'documents' && (
                        <div className="bg-white rounded-lg shadow-sm border p-6">
                            <h2 className="text-2xl font-bold text-gray-900 mb-4">üìÅ Document Hub</h2>
                            <p className="text-gray-600">Document management and photo uploads coming in the next update!</p>
                        </div>
                    )}
                </div>

                {/* Inspection Details Modal */}
                {selectedInspection && (
                    <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                        <div className="bg-white rounded-lg p-6 w-full max-w-2xl">
                            <div className="flex justify-between items-start mb-4">
                                <div>
                                    <h3 className="text-xl font-semibold">{selectedInspection.siteName}</h3>
                                    <p className="text-gray-600">{selectedInspection.address}</p>
                                </div>
                                <button
                                    onClick={() => setSelectedInspection(null)}
                                    className="text-gray-500 hover:text-gray-700 text-xl"
                                >
                                    √ó
                                </button>
                            </div>
                            
                            <div className="grid grid-cols-2 gap-4">
                                <div>
                                    <label className="text-sm font-medium text-gray-500">Inspector</label>
                                    <p className="text-gray-900">{selectedInspection.inspector}</p>
                                </div>
                                <div>
                                    <label className="text-sm font-medium text-gray-500">Contractor</label>
                                    <p className="text-gray-900">{selectedInspection.contractor}</p>
                                </div>
                            </div>
                            
                            <button
                                onClick={() => setSelectedInspection(null)}
                                className="mt-6 bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400 transition-colors"
                            >
                                Close
                            </button>
                        </div>
                    </div>
                )}
            </div>
        );
    };

    ReactDOM.render(<SWPPPInspectionHub />, document.getElementById('root'));
</script>
