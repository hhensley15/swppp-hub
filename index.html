<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SWPPP Management Hub</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>
</head>
<body>
    <div id="root"></div>

<script type="text/babel">
    const { useState, useEffect, useMemo } = React;

    // More icon components
    const MapPin = () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" /><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" /></svg>;
    const Search = () => <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" /></svg>;
    const User = () => <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" /></svg>;
    const Filter = () => <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.707A1 1 0 013 7V4z" /></svg>;
    const Plus = () => <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 6v6m0 0v6m0-6h6m-6 0H6" /></svg>;
    const Eye = () => <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" /></svg>;

    const SWPPPInspectionHub = () => {
        // All of Shawn's inspection sites
        const [inspections, setInspections] = useState([
            {
                id: 1,
                siteName: "St. Francios Substation",
                address: "3980 Hazel run Road, Bonne Terre",
                inspector: "Shawn Garland",
                contractor: "Ameren",
                inspectionStartDate: "",
                monthlyAllottedInspections: ""
            },
            {
                id: 2,
                siteName: "Hampton Inn",
                address: "1331 Shapiro Drive, Festus",
                inspector: "Shawn Garland",
                contractor: "Budrovich",
                inspectionStartDate: "",
                monthlyAllottedInspections: ""
            },
            {
                id: 3,
                siteName: "Dunklin High School",
                address: "713 Circle Street, Herculaneum, MO 63048",
                inspector: "Shawn Garland",
                contractor: "ICS",
                inspectionStartDate: "",
                monthlyAllottedInspections: ""
            },
            {
                id: 4,
                siteName: "Covering House",
                address: "800 Montebello Camp Road, Imperial",
                inspector: "Shawn Garland",
                contractor: "PCX",
                inspectionStartDate: "",
                monthlyAllottedInspections: ""
            },
            {
                id: 5,
                siteName: "7 Brew",
                address: "1289 Jeffco Blvd, Arnold",
                inspector: "Shawn Garland",
                contractor: "7 brew",
                inspectionStartDate: "",
                monthlyAllottedInspections: ""
            },
            {
                id: 6,
                siteName: "Mercy Hospital South",
                address: "10010 Kennerly Road, St. Louis, MO 63128",
                inspector: "Shawn Garland",
                contractor: "Budrovich",
                inspectionStartDate: "",
                monthlyAllottedInspections: ""
            },
            {
                id: 7,
                siteName: "St. Louis Zoo Main Zoo",
                address: "1 Government Dr, St. Louis, MO 63110 - GATE 5",
                inspector: "Shawn Garland",
                contractor: "Budrovich",
                inspectionStartDate: "",
                monthlyAllottedInspections: ""
            }
        ]);

        const [activeTab, setActiveTab] = useState('inspections');
        const [selectedInspector, setSelectedInspector] = useState('all');
        const [selectedContractor, setSelectedContractor] = useState('all');
        const [searchTerm, setSearchTerm] = useState('');
        const [selectedInspection, setSelectedInspection] = useState(null);
        const [showAddForm, setShowAddForm] = useState(false);

        // Get unique contractors and inspectors
        const contractors = useMemo(() => {
            const uniqueContractors = [...new Set(inspections.map(i => i.contractor))];
            return uniqueContractors.sort();
        }, [inspections]);

        const inspectors = useMemo(() => {
            const uniqueInspectors = [...new Set(inspections.map(i => i.inspector))];
            return uniqueInspectors.sort();
        }, [inspections]);

        // Filter inspections
        const filteredInspections = useMemo(() => {
            return inspections.filter(inspection => {
                const matchesInspector = selectedInspector === 'all' || inspection.inspector === selectedInspector;
                const matchesContractor = selectedContractor === 'all' || inspection.contractor === selectedContractor;
                const matchesSearch = searchTerm === '' || 
                    inspection.siteName.toLowerCase().includes(searchTerm.toLowerCase()) ||
                    inspection.contractor.toLowerCase().includes(searchTerm.toLowerCase());
                
                return matchesInspector && matchesContractor && matchesSearch;
            });
        }, [inspections, selectedInspector, selectedContractor, searchTerm]);

        // Editable cell component
        const EditableCell = ({ inspection, field, value, placeholder = "" }) => {
            const [isEditing, setIsEditing] = useState(false);
            const [editValue, setEditValue] = useState(value || "");

            const handleSave = () => {
                setInspections(prev => prev.map(insp => 
                    insp.id === inspection.id ? { ...insp, [field]: editValue } : insp
                ));
                setIsEditing(false);
            };

            if (isEditing) {
                return (
                    <input
                        type={field === 'inspectionStartDate' ? 'date' : 'text'}
                        value={editValue}
                        onChange={(e) => setEditValue(e.target.value)}
                        onBlur={handleSave}
                        onKeyDown={(e) => e.key === 'Enter' && handleSave()}
                        className="w-full text-xs border border-blue-300 rounded px-2 py-1 focus:outline-none focus:border-blue-500"
                        autoFocus
                    />
                );
            }

            return (
                <div
                    onClick={() => setIsEditing(true)}
                    className="cursor-pointer hover:bg-blue-50 px-2 py-1 rounded text-xs min-h-[24px] flex items-center"
                    title="Click to edit"
                >
                    {value ? (
                        field === 'inspectionStartDate' ? new Date(value).toLocaleDateString() : value
                    ) : (
                        <span className="text-gray-400 italic">{placeholder}</span>
                    )}
                </div>
            );
        };

        return (
            <div className="min-h-screen bg-gray-50">
                {/* Header */}
                <div className="bg-white shadow-sm border-b">
                    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
                        <div className="flex justify-between items-center">
